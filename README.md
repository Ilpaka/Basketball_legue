# Basketball Team Management System

> Единая платформа для управления расписанием, играми и статистикой любительской баскетбольной команды.

---

## Зачем нужна система

* **Расписание** тренировок и матчей сейчас хранится в чатах и таблицах — легко потеряться.  
* **Статистика игроков** ведётся вручную, поэтому трудно объективно отслеживать прогресс.  
* **Коммуникация** с командой (уведомления) и публикация результатов разнесены по разным сервисам.  

**Цель проекта** — собрать всё в одном приложении: от планирования тренировок до личного кабинета игрока.

---

## Ключевые функции

| Модуль | Возможности |
|-------|-------------|
| **Тренер** | • Создание/редактирование игр <br>• Назначение тренировок <br>• Формирование ростера <br>• Внесение статистики после матча |
| **Общие** | • Каталог всех игр и тренировок <br>• Возможность расширения (мерч, интеграции с лигой) |

---

## UML-диаграммы

Файлы с диаграммами лежат в каталоге `docs/diagrams/`.  
Ниже представлены готовые изображения и краткие пояснения.

### 1. Диаграмма вариантов использования (Use-Case)

![Use-Case Diagram](docs/diagrams/use_case.jpeg)

---

### 2. Диаграмма классов (Class)

![Class Diagram](docs/diagrams/class_diagram.jpeg)

*Отражает основные сущности домена и их связи: команда агрегирует ростер, тренировки и игры; игрок ассоциирован со статистикой, тренер расширяет сущность «Player».*

# Структура базы данных Basketball DB

Данная база данных предназначена для хранения информации о баскетбольных командах, игроках, тренерах, играх и тренировках.

## Таблицы и их описание

### player
- **id** — уникальный идентификатор игрока (INTEGER PRIMARY KEY)
- **name** — имя игрока (TEXT, NOT NULL)
- **surname** — фамилия игрока (TEXT, NOT NULL)
- **birth_date** — дата рождения (TEXT, формат 'YYYY-MM-DD', NOT NULL)
- **player_number** — игровой номер (INTEGER)
- **height** — рост (REAL)
- **weight** — вес (REAL)
- **position** — игровая позиция (TEXT)

### coach
- **id** — уникальный идентификатор тренера (INTEGER PRIMARY KEY)
- **player_id** — ссылка на игрока, который является тренером (INTEGER, UNIQUE, FOREIGN KEY на player(id), ON DELETE CASCADE)
- **role** — роль тренера (TEXT)

### team
- **id** — уникальный идентификатор команды (INTEGER PRIMARY KEY)
- **name** — название команды (TEXT, NOT NULL)
- **league** — лига, в которой участвует команда (TEXT)

### roster
- **id** — уникальный идентификатор состава (INTEGER PRIMARY KEY)
- **team_id** — ссылка на команду (INTEGER, FOREIGN KEY на team(id), ON DELETE CASCADE)
- **season** — сезон (TEXT, NOT NULL)

### game
- **id** — уникальный идентификатор игры (INTEGER PRIMARY KEY)
- **team_id** — ссылка на команду (INTEGER, FOREIGN KEY на team(id), ON DELETE CASCADE)
- **date** — дата игры (TEXT, формат 'YYYY-MM-DD', NOT NULL)
- **opponents** — соперники (TEXT)
- **result** — результат (TEXT)

### training_session
- **id** — уникальный идентификатор тренировки (INTEGER PRIMARY KEY)
- **team_id** — ссылка на команду (INTEGER, FOREIGN KEY на team(id), ON DELETE CASCADE)
- **datetime** — дата и время тренировки (TEXT, формат 'YYYY-MM-DD HH:MM:SS', NOT NULL)
- **location** — место проведения (TEXT)

### player_roster
- **player_id** — ссылка на игрока (INTEGER, FOREIGN KEY на player(id), ON DELETE CASCADE)
- **roster_id** — ссылка на состав (INTEGER, FOREIGN KEY на roster(id), ON DELETE CASCADE)
- **PRIMARY KEY (player_id, roster_id)**

### stats_record
- **id** — уникальный идентификатор записи статистики (INTEGER PRIMARY KEY)
- **player_id** — ссылка на игрока (INTEGER, FOREIGN KEY на player(id), ON DELETE CASCADE)
- **game_id** — ссылка на игру (INTEGER, FOREIGN KEY на game(id), ON DELETE CASCADE)
- **points** — очки (INTEGER, по умолчанию 0)
- **rebounds** — подборы (INTEGER, по умолчанию 0)
- **assists** — передачи (INTEGER, по умолчанию 0)
- **blocks** — блоки (INTEGER, по умолчанию 0)
- **steals** — перехваты (INTEGER, по умолчанию 0)

### team_coach
- **id** — уникальный идентификатор связи команда-тренер (INTEGER PRIMARY KEY)
- **team_id** — ссылка на команду (INTEGER, FOREIGN KEY на team(id), ON DELETE CASCADE)
- **coach_id** — ссылка на тренера (INTEGER, FOREIGN KEY на coach(id), ON DELETE CASCADE)

---

## Взаимосвязи между таблицами

- Один игрок может быть тренером (coach.player_id — уникальная ссылка на player.id).
- Команда имеет несколько составов (roster) по сезонам.
- Игроки могут входить в составы через таблицу player_roster (многие-ко-многим).
- Каждая игра связана с командой.
- Каждая тренировка связана с командой.
- Записи статистики связаны с игроком и игрой.
- Команды могут иметь нескольких тренеров через team_coach.


##Консольное приложение для управления данными баскетбольной лиги: командами, игроками, тренерами, играми и тренировками.


## Основные команды меню

| №   | Команда                               | Назначение                                                       |
|-----|---------------------------------------|------------------------------------------------------------------|
| 1   | Добавить команду                      | Добавление новой команды в лигу                                  |
| 2   | Добавить игрока                       | Добавление нового игрока                                         |
| 3   | Добавить тренера                      | Добавление нового тренера                                        |
| 4   | Добавить игру                         | Добавление новой игры                                            |
| 5   | Добавить тренировку                   | Добавление новой тренировки                                      |
| 6   | Просмотреть все команды               | Вывод списка всех команд                                         |
| 7   | Просмотреть всех игроков              | Вывод списка всех игроков                                        |
| 8   | Просмотреть всех тренеров             | Вывод списка всех тренеров                                       |
| 9   | Просмотреть все игры                  | Вывод списка всех игр                                            |
| 10  | Просмотреть все тренировки            | Вывод списка всех тренировок                                     |
| 11  | Выход                                 | Завершение работы приложения                                     |

## Особенности

- **Проверка уникальности**: При добавлении команд, игроков, тренеров, игр и тренировок приложение проверяет, нет ли уже такой записи.
- **Проверка существования**: При просмотре информации, если сущности нет в базе, выводится соответствующее сообщение.
- **Обработка ошибок**: Ввод защищён от некорректных значений (например, неверный формат даты, дублирование записей).
- **Интуитивный интерфейс**: Приложение информирует пользователя о результате каждого действия и просит нажать Enter для продолжения.

## Почему в проекте нет асинхронности

Проект реализован с использованием **синхронных методов** работы с базой данных SQLite. Это сделано по следующим причинам:

1. **Ограничения SQLite**  
   Асинхронные методы ADO.NET для SQLite (`OpenAsync`, `ExecuteNonQueryAsync` и т.д.) фактически не дают реального прироста производительности, потому что SQLite не поддерживает настоящий асинхронный ввод-вывод на уровне движка. Даже при использовании `async/await` операции выполняются синхронно внутри одного потока.

2. **Простота и надёжность кода**  
   Синхронный код проще для понимания, отладки и сопровождения. Для небольших и учебных проектов это снижает вероятность ошибок, связанных с конкурентным доступом и состоянием задач.

3. **Низкая нагрузка и скорость операций**  
   Все операции с базой данных выполняются быстро, объём данных небольшой, поэтому пользователь не замечает задержек. Асинхронность оправдана только при большом количестве одновременных запросов или длительных операциях, что не актуально для данного проекта.

4. **Рекомендации Microsoft**  
   В официальной документации Microsoft отмечается, что асинхронные методы для SQLite не дают выигрыша в производительности и не рекомендуются для настольных и учебных приложений.
   
---

**Вывод:**  
Асинхронность не используется осознанно, чтобы сделать проект проще, надёжнее и избежать ложного ощущения параллелизма при работе с SQLite.

---
## Папка BLL (Business Logic Layer — бизнес-логика)

- **BaseService.cs**
  - Абстрактный базовый класс для всех сервисов бизнес-логики.
  - Определяет методы: `Add`, `GetAll`, `GetById`.
  - Позволяет использовать наследование и полиморфизм для сервисов сущностей.

- **CoachService.cs**
  - Сервис для работы с тренерами.
  - Реализует бизнес-валидацию (например, стаж не может быть отрицательным).
  - Методы: добавление тренера, получение всех тренеров, поиск по id.

- **GameService.cs**
  - Сервис для работы с играми.
  - Проверяет, что команды не совпадают, корректность данных.
  - Методы: добавление игры, получение всех игр, поиск по id.

- **PlayerService.cs**
  - Сервис для работы с игроками.
  - Проверяет корректность роста, веса, уникальность номера и т.д.
  - Методы: добавление игрока, получение всех игроков, поиск по id, поиск по имени и фамилии.

- **TeamService.cs**
  - Сервис для работы с командами.
  - Проверяет уникальность и корректность названия.
  - Методы: добавление команды, получение всех команд, поиск по id.

- **TrainingService.cs**
  - Сервис для работы с тренировками.
  - Проверяет корректность места, даты и описания.
  - Методы: добавление тренировки, получение всех тренировок, поиск по id.

---

## Папка DAL (Data Access Layer — слой доступа к данным)

- **ICoachRepository.cs, IGameRepository.cs, IPlayerRepository.cs, ITeamRepository.cs, ITrainingRepository.cs**
  - Интерфейсы для доступа к данным каждой сущности.
  - Определяют методы: `Insert`, `GetAll`, `GetById` (для игроков — ещё `GetByName`).

- **SqliteCoachRepository.cs**
  - Реализация интерфейса для тренеров на SQLite.
  - Методы: добавление тренера, получение всех, поиск по id.

- **SqliteGameRepository.cs**
  - Реализация интерфейса для игр на SQLite.
  - Методы: добавление игры, получение всех, поиск по id.

- **SqlitePlayerRepository.cs**
  - Реализация интерфейса для игроков на SQLite.
  - Методы: добавление игрока, получение всех, поиск по id, поиск по имени и фамилии.

- **SqliteTeamRepository.cs**
  - Реализация интерфейса для команд на SQLite.
  - Методы: добавление команды, получение всех, поиск по id.

- **SqliteTrainingRepository.cs**
  - Реализация интерфейса для тренировок на SQLite.
  - Методы: добавление тренировки, получение всех, поиск по id.

---

## Папка Models (Модели данных)

- **Coach.cs**
  - Модель тренера: `Id`, `Name`, `Surname`, `BirthDate`, `ExperienceYears`, `Specialization`, `TeamId`.

- **Game.cs**
  - Модель игры: `Id`, `Team1Id`, `Team2Id`, `Date`, `Score1`, `Score2`.

- **Player.cs**
  - Модель игрока: `Id`, `Name`, `Surname`, `BirthDate`, `Number`, `Height`, `Weight`, `Position`, `TeamId`, `Points`, `Assists`, `Rebounds`.

- **Team.cs**
  - Модель команды: `Id`, `Name`, `League`.

- **Training.cs**
  - Модель тренировки: `Id`, `TeamId`, `Date`, `Place`, `Description`.

---

## Итог

- **BLL** — бизнес-логика, сервисы для каждой сущности, наследование и полиморфизм через BaseService.
- **DAL** — интерфейсы и их реализации для работы с SQLite, инкапсуляция работы с БД.
- **Models** — простые классы для хранения данных сущностей.

**Каждый файл отвечает за свою сущность и строго разделяет архитектуру на слои: модели, бизнес-логику и работу с БД.**

---


